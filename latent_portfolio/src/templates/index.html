<!DOCTYPE html>
<html lang="en">
<head>
    {% set default_title = '3D Latent viz' %}
    {% set default_og_description = config.meta.default_description %}
    {% include 'header.html' %}
    <link rel="stylesheet" href="{{ 'style.css' | url }}">
</head>
<body>
{% include 'body_start.html' %}
    <div id="loading" style="display: none;">Loading articles...</div>

    {% with main_view=True %}
    {% include 'navbar.html' %}
    {% endwith %}
    <div id="container"></div>
    
    {% if config.bloom.enabled %}
    <!-- Bloom Controls -->
    <div id="bloom-controls" style="display: none;">
        <h3>Bloom Effects</h3>
        <div class="bloom-control">
            <label>
                <input type="checkbox" id="bloom-enabled" checked>
                Enable Bloom
            </label>
        </div>
        <div class="bloom-control">
            <label>
                Strength <span class="bloom-value" id="bloom-strength-value">{{ config.bloom.strength }}</span>
            </label>
            <input type="range" id="bloom-strength" min="0" max="3" step="0.1" value="{{ config.bloom.strength }}">
        </div>
        <div class="bloom-control">
            <label>
                Radius <span class="bloom-value" id="bloom-radius-value">{{ config.bloom.radius }}</span>
            </label>
            <input type="range" id="bloom-radius" min="0" max="1" step="0.01" value="{{ config.bloom.radius }}">
        </div>
        <div class="bloom-control">
            <label>
                Threshold <span class="bloom-value" id="bloom-threshold-value">{{ config.bloom.threshold }}</span>
            </label>
            <input type="range" id="bloom-threshold" min="0" max="1" step="0.01" value="{{ config.bloom.threshold }}">
        </div>
    </div>
    {% endif %}

    <div id="startup-modal">
        {% with show_button=True %}
        {% include 'startup_modal.html' %}
        {% endwith %}
    </div>

    <div id="how-it-works-modal" style="display: none;">
        {% include 'how_it_works_modal.html' %}
    </div>


    <!-- THREE.js -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stats.js@0.17.0/build/stats.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/FXAAShader.js"></script>

    <!-- MiniSearch -->
    <script src="https://cdn.jsdelivr.net/npm/minisearch@7.2.0/dist/umd/index.min.js"></script>
    
    <!-- Application Scripts -->
    <script src="{{ 'conf.js' | url }}"></script>
    <script src="{{ 'utils.js' | url }}"></script>
    <script src="{{ 'links.js' | url }}"></script>
    <script src="{{ 'article3D.js' | url }}"></script>
    <script src="{{ 'search.js' | url }}"></script>
    <script src="{{ 'userControls.js' | url }}"></script>
    <script src="{{ 'main.js' | url }}"></script>
{% include 'body_end.html' %}
</body>
</html>