<nav class="navbar-glass">
    <div class="navbar-left">
        <a href="{{ 'home.html' | url }}" class="navbar-title">{{ config.site.title }}</a>
        <div class="navbar-social">
            <a href="{{ config.contact.linkedin }}" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="LinkedIn">
                {% include 'icons/linkedin_icon.html' %}
            </a>
            <a href="{{ config.contact.github }}" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="GitHub">
                {% include 'icons/github_icon.html' %}
            </a>
        </div>
    </div>
    <div class="navbar-right">
        <div class="navbar-links">
            {% if main_view %}
            <a href="{{ 'home.html' | url }}" class="navbar-link">plain view</a>
            <a href="#" class="navbar-link" id="how-it-works-link">how it works</a>
            <a href="{{ 'home.html' | url }}#contact" class="navbar-link">contact</a>
            {% else %}
            <a href="{{ 'home.html' | url }}" class="navbar-link">about</a>
            <a href="#" class="navbar-link" id="how-it-works-link">how it works</a>
            <a href="{{ 'index.html' | url }}?no_modal=true" class="navbar-link">3D view</a>
            <a href="{{ 'home.html' | url }}#contact" class="navbar-link">contact</a>
            {% endif %}
        </div>
        {% if not main_view %}
        <button class="navbar-search-btn" id="navbar-search" aria-label="Search">
            <svg viewBox="120 223 10 10" class="navbar-search-icon">
                <circle class="fab-icon-stroke" cx="126.08" cy="227.03" r="2.83" />
                <path class="fab-icon-stroke" d="m 123.96732,229.32748 -3.06064,3.06064" />
            </svg>
        </button>
        {% endif %}
        <button class="navbar-hamburger" id="navbar-hamburger" aria-label="Menu" aria-expanded="false">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>
    </div>
        <div class="navbar-mobile-menu" id="navbar-mobile-menu">
        <div class="mobile-menu-links">
            {% if main_view %}
            <a href="{{ 'home.html' | url }}" class="navbar-link">plain view</a>
            <a href="#" class="navbar-link" id="how-it-works-link-mobile">how it works</a>
            <a href="{{ 'home.html' | url }}#contact" class="navbar-link">contact</a>
            {% else %}
            <a href="{{ 'home.html' | url }}" class="navbar-link">about</a>
            <a href="#" class="navbar-link" id="how-it-works-link-mobile">how it works</a>
            <a href="{{ 'index.html' | url }}?no_modal=true" class="navbar-link">3D view</a>
            <a href="{{ 'home.html' | url }}#contact" class="navbar-link">contact</a>
            {% endif %}
        </div>
        <div class="mobile-menu-social">
            <a href="{{ config.contact.linkedin }}" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="LinkedIn">
                {% include 'icons/linkedin_icon.html' %}
            </a>
            <a href="{{ config.contact.github }}" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="GitHub">
                {% include 'icons/github_icon.html' %}
            </a>
        </div>
    </div>
</nav>

<script>
(function() {
    const hamburger = document.getElementById('navbar-hamburger');
    const mobileMenu = document.getElementById('navbar-mobile-menu');
    
    if (hamburger && mobileMenu) {
        hamburger.addEventListener('click', function() {
            const isExpanded = hamburger.getAttribute('aria-expanded') === 'true';
            hamburger.setAttribute('aria-expanded', !isExpanded);
            mobileMenu.classList.toggle('open');
        });
        
        // Close menu when clicking on a link
        const menuLinks = mobileMenu.querySelectorAll('.navbar-link');
        menuLinks.forEach(link => {
            link.addEventListener('click', function() {
                hamburger.setAttribute('aria-expanded', 'false');
                mobileMenu.classList.remove('open');
            });
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            if (!hamburger.contains(event.target) && !mobileMenu.contains(event.target)) {
                hamburger.setAttribute('aria-expanded', 'false');
                mobileMenu.classList.remove('open');
            }
        });
    }
})();
</script>